<!-- BlogPosting -->
{% assign web_page_blocks = page.content | parse_json %}
{%- assign article_body = '' -%}
{%- for item in web_page_blocks -%}
    {%- if item.type != 'settings' -%}
        {%- assign article_body = article_body | append item.title -%}
        {%- assign article_body = article_body | append item.subtitle -%}
        {%- assign article_body = article_body | append item.note -%}
        {%- assign article_body = article_body | append item.paragraph -%}
    {%- endif -%}
{%- endfor -%}

<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage":{
        "@type":"WebPage",
        "@id":"{{ canonical_url }}"
    },
    "headline": "{{ article.title }}",
    "image": {
        "@type": "ImageObject",
        "url": "{{ page_image_url | absolute_url }}",
        "width": 600,
        "height": 400
    },
    "datePublished": "{{ page_settings.date }}",
    "dateModified": "{{ page_settings.date }}",

    {% if page_settings.author.firstName %}
    "author": {
        "@type": "Person",
        "name": "{{ page_settings.author.firstName }} {{ page_settings.author.lastName }}",
        "jobTitle": "{{ page_settings.author.jobTitle }}",
        "url": "{{ page_settings.author.linkedinLink }}"
    },
    {% else %}
    "author": {
        "@type": "Organization",
        "name": "{{ settings.markup_corporation_name }}",
        "logo": {
            "@type": "ImageObject",
            "url": "{{ settings.markup_website_default_image }}",
            "width": 150,
            "height": 56
        }
    },
    {% endif %}
    "publisher": {
        "@type": "Organization",
        "name": "{{ settings.markup_corporation_name }}",
        "logo": {
            "@type": "ImageObject",
            "url": "{{ settings.markup_website_default_image }}",
            "width": 150,
            "height": 56
        }
    },
    "description": "{{ page_settings.description }}",
    "articleBody": "{{ article_body | strip_html }}"
}
</script>
